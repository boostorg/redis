<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Aedis: Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Aedis<span id="projectnumber">&#160;1.4.1</span>
   </div>
   <div id="projectbrief">A redis client library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__low-level-api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga49a01c937e62d5f9916a0c60c4abbc1c"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#ga49a01c937e62d5f9916a0c60c4abbc1c">aedis::adapter::adapt2</a> () noexcept</td></tr>
<tr class="memdesc:ga49a01c937e62d5f9916a0c60c4abbc1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a dummy response adapter.  <a href="group__low-level-api.html#ga49a01c937e62d5f9916a0c60c4abbc1c">More...</a><br /></td></tr>
<tr class="separator:ga49a01c937e62d5f9916a0c60c4abbc1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fe03b07308657966b08f33f78cedf73"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ga4fe03b07308657966b08f33f78cedf73"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#ga4fe03b07308657966b08f33f78cedf73">aedis::adapter::adapt2</a> (T &amp;t) noexcept</td></tr>
<tr class="memdesc:ga4fe03b07308657966b08f33f78cedf73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adapts user data to read operations.  <a href="group__low-level-api.html#ga4fe03b07308657966b08f33f78cedf73">More...</a><br /></td></tr>
<tr class="separator:ga4fe03b07308657966b08f33f78cedf73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a0d6c76b5faeeaa5ee5e2e4770cd181"><td class="memTemplParams" colspan="2">template&lt;class AsyncReadStream , class DynamicBuffer , class ResponseAdapter  = detail::ignore_response, class CompletionToken  = boost::asio::default_completion_token_t&lt;typename AsyncReadStream::executor_type&gt;&gt; </td></tr>
<tr class="memitem:ga8a0d6c76b5faeeaa5ee5e2e4770cd181"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">aedis::resp3::async_read</a> (AsyncReadStream &amp;stream, DynamicBuffer buffer, ResponseAdapter adapter=ResponseAdapter{}, CompletionToken &amp;&amp;token=boost::asio::default_completion_token_t&lt; typename AsyncReadStream::executor_type &gt;{})</td></tr>
<tr class="memdesc:ga8a0d6c76b5faeeaa5ee5e2e4770cd181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a complete response to a Redis command asynchronously.  <a href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">More...</a><br /></td></tr>
<tr class="separator:ga8a0d6c76b5faeeaa5ee5e2e4770cd181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54dda2974f233dd25a2eaf20ce9b5385"><td class="memTemplParams" colspan="2">template&lt;class AsyncWriteStream , class Request , class CompletionToken  = boost::asio::default_completion_token_t&lt;typename AsyncWriteStream::executor_type&gt;&gt; </td></tr>
<tr class="memitem:ga54dda2974f233dd25a2eaf20ce9b5385"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#ga54dda2974f233dd25a2eaf20ce9b5385">aedis::resp3::async_write</a> (AsyncWriteStream &amp;stream, Request const &amp;req, CompletionToken &amp;&amp;token=boost::asio::default_completion_token_t&lt; typename AsyncWriteStream::executor_type &gt;{})</td></tr>
<tr class="memdesc:ga54dda2974f233dd25a2eaf20ce9b5385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a request asynchronously.  <a href="group__low-level-api.html#ga54dda2974f233dd25a2eaf20ce9b5385">More...</a><br /></td></tr>
<tr class="separator:ga54dda2974f233dd25a2eaf20ce9b5385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7df3a165405aef64f72618d45d100cb"><td class="memTemplParams" colspan="2">template&lt;class SyncReadStream , class DynamicBuffer , class ResponseAdapter &gt; </td></tr>
<tr class="memitem:gad7df3a165405aef64f72618d45d100cb"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">aedis::resp3::read</a> (SyncReadStream &amp;stream, DynamicBuffer buf, ResponseAdapter adapter, boost::system::error_code &amp;ec) -&gt; std::size_t</td></tr>
<tr class="memdesc:gad7df3a165405aef64f72618d45d100cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a complete response to a command sychronously.  <a href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">More...</a><br /></td></tr>
<tr class="separator:gad7df3a165405aef64f72618d45d100cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab94ca8205fe516f47e48e148a6216026"><td class="memTemplParams" colspan="2">template&lt;class SyncReadStream , class DynamicBuffer , class ResponseAdapter  = detail::ignore_response&gt; </td></tr>
<tr class="memitem:gab94ca8205fe516f47e48e148a6216026"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#gab94ca8205fe516f47e48e148a6216026">aedis::resp3::read</a> (SyncReadStream &amp;stream, DynamicBuffer buf, ResponseAdapter adapter=ResponseAdapter{})</td></tr>
<tr class="memdesc:gab94ca8205fe516f47e48e148a6216026"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a complete response to a command sychronously.  <a href="group__low-level-api.html#gab94ca8205fe516f47e48e148a6216026">More...</a><br /></td></tr>
<tr class="separator:gab94ca8205fe516f47e48e148a6216026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbd6128072528430cb2e95782410258c"><td class="memTemplParams" colspan="2">template&lt;class SyncWriteStream , class Request &gt; </td></tr>
<tr class="memitem:gacbd6128072528430cb2e95782410258c"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__low-level-api.html#gacbd6128072528430cb2e95782410258c">aedis::resp3::write</a> (SyncWriteStream &amp;stream, Request const &amp;req)</td></tr>
<tr class="memdesc:gacbd6128072528430cb2e95782410258c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a request synchronously.  <a href="group__low-level-api.html#gacbd6128072528430cb2e95782410258c">More...</a><br /></td></tr>
<tr class="separator:gacbd6128072528430cb2e95782410258c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >This page contains the documentation of the Aedis low-level API. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga49a01c937e62d5f9916a0c60c4abbc1c" name="ga49a01c937e62d5f9916a0c60c4abbc1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49a01c937e62d5f9916a0c60c4abbc1c">&#9670;&nbsp;</a></span>adapt2() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::adapter::adapt2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a dummy response adapter. </p>
<p >The adapter returned by this function ignores responses. It is useful to avoid wasting time with responses which are not needed.</p>
<p >Example:</p>
<div class="fragment"><div class="line"><span class="comment">// Pushes and writes some commands to the server.</span></div>
<div class="line">sr.push(command::hello, 3);</div>
<div class="line">sr.push(command::ping);</div>
<div class="line">sr.push(command::quit);</div>
<div class="line"><a class="code hl_function" href="group__low-level-api.html#gacbd6128072528430cb2e95782410258c">net::write</a>(socket, net::buffer(request));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Ignores all responses except for the response to ping.</span></div>
<div class="line">std::string buffer;</div>
<div class="line"><a class="code hl_function" href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">resp3::read</a>(socket, dynamic_buffer(buffer), <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>());     <span class="comment">// hello</span></div>
<div class="line"><a class="code hl_function" href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">resp3::read</a>(socket, dynamic_buffer(buffer), <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>(resp)); <span class="comment">// ping</span></div>
<div class="line"><a class="code hl_function" href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">resp3::read</a>(socket, dynamic_buffer(buffer, <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>()));     <span class="comment">// quit</span></div>
<div class="ttc" id="agroup__high-level-api_html_gac56bb1a8df93445853a4b9dae2d97b6e"><div class="ttname"><a href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">aedis::adapt</a></div><div class="ttdeci">auto adapt(std::size_t max_read_size=(std::numeric_limits&lt; std::size_t &gt;::max)()) noexcept</div><div class="ttdoc">Creates an adapter that ignores responses.</div><div class="ttdef"><b>Definition:</b> <a href="adapt_8hpp_source.html#l00199">adapt.hpp:199</a></div></div>
<div class="ttc" id="agroup__low-level-api_html_gacbd6128072528430cb2e95782410258c"><div class="ttname"><a href="group__low-level-api.html#gacbd6128072528430cb2e95782410258c">aedis::resp3::write</a></div><div class="ttdeci">auto write(SyncWriteStream &amp;stream, Request const &amp;req)</div><div class="ttdoc">Writes a request synchronously.</div><div class="ttdef"><b>Definition:</b> <a href="write_8hpp_source.html#l00024">write.hpp:24</a></div></div>
<div class="ttc" id="agroup__low-level-api_html_gad7df3a165405aef64f72618d45d100cb"><div class="ttname"><a href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">aedis::resp3::read</a></div><div class="ttdeci">auto read(SyncReadStream &amp;stream, DynamicBuffer buf, ResponseAdapter adapter, boost::system::error_code &amp;ec) -&gt; std::size_t</div><div class="ttdoc">Reads a complete response to a command sychronously.</div><div class="ttdef"><b>Definition:</b> <a href="read_8hpp_source.html#l00056">read.hpp:56</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="adapter_2adapt_8hpp_source.html#l00040">40</a> of file <a class="el" href="adapter_2adapt_8hpp_source.html">adapt.hpp</a>.</p>

</div>
</div>
<a id="ga4fe03b07308657966b08f33f78cedf73" name="ga4fe03b07308657966b08f33f78cedf73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fe03b07308657966b08f33f78cedf73">&#9670;&nbsp;</a></span>adapt2() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::adapter::adapt2 </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adapts user data to read operations. </p>
<p >STL containers, <code>std::tuple</code> and built-in types are supported and can be used in conjunction with <code>std::optional&lt;T&gt;</code>.</p>
<p >Example usage:</p>
<div class="fragment"><div class="line">std::unordered_map&lt;std::string, std::string&gt; cont;</div>
<div class="line"><span class="keyword">co_await</span> <a class="code hl_function" href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">async_read</a>(socket, buffer, <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>(cont));</div>
<div class="ttc" id="agroup__low-level-api_html_ga8a0d6c76b5faeeaa5ee5e2e4770cd181"><div class="ttname"><a href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">aedis::resp3::async_read</a></div><div class="ttdeci">auto async_read(AsyncReadStream &amp;stream, DynamicBuffer buffer, ResponseAdapter adapter=ResponseAdapter{}, CompletionToken &amp;&amp;token=boost::asio::default_completion_token_t&lt; typename AsyncReadStream::executor_type &gt;{})</div><div class="ttdoc">Reads a complete response to a Redis command asynchronously.</div><div class="ttdef"><b>Definition:</b> <a href="read_8hpp_source.html#l00169">read.hpp:169</a></div></div>
</div><!-- fragment --><p >For a transaction</p>
<div class="fragment"><div class="line">sr.push(command::multi);</div>
<div class="line">sr.push(command::ping, ...);</div>
<div class="line">sr.push(command::incr, ...);</div>
<div class="line">sr.push_range(command::rpush, ...);</div>
<div class="line">sr.push(command::lrange, ...);</div>
<div class="line">sr.push(command::incr, ...);</div>
<div class="line">sr.push(command::exec);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">co_await</span> <a class="code hl_function" href="group__low-level-api.html#ga54dda2974f233dd25a2eaf20ce9b5385">async_write</a>(socket, buffer(request));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reads the response to a transaction</span></div>
<div class="line">std::tuple&lt;std::string, int, int, std::vector&lt;std::string&gt;, <span class="keywordtype">int</span>&gt; execs;</div>
<div class="line"><span class="keyword">co_await</span> <a class="code hl_function" href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">resp3::async_read</a>(socket, dynamic_buffer(buffer), <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>(execs));</div>
<div class="ttc" id="agroup__low-level-api_html_ga54dda2974f233dd25a2eaf20ce9b5385"><div class="ttname"><a href="group__low-level-api.html#ga54dda2974f233dd25a2eaf20ce9b5385">aedis::resp3::async_write</a></div><div class="ttdeci">auto async_write(AsyncWriteStream &amp;stream, Request const &amp;req, CompletionToken &amp;&amp;token=boost::asio::default_completion_token_t&lt; typename AsyncWriteStream::executor_type &gt;{})</div><div class="ttdoc">Writes a request asynchronously.</div><div class="ttdef"><b>Definition:</b> <a href="write_8hpp_source.html#l00053">write.hpp:53</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="adapter_2adapt_8hpp_source.html#l00075">75</a> of file <a class="el" href="adapter_2adapt_8hpp_source.html">adapt.hpp</a>.</p>

</div>
</div>
<a id="ga8a0d6c76b5faeeaa5ee5e2e4770cd181" name="ga8a0d6c76b5faeeaa5ee5e2e4770cd181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">&#9670;&nbsp;</a></span>async_read()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class AsyncReadStream , class DynamicBuffer , class ResponseAdapter  = detail::ignore_response, class CompletionToken  = boost::asio::default_completion_token_t&lt;typename AsyncReadStream::executor_type&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::resp3::async_read </td>
          <td>(</td>
          <td class="paramtype">AsyncReadStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynamicBuffer&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ResponseAdapter&#160;</td>
          <td class="paramname"><em>adapter</em> = <code>ResponseAdapter{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CompletionToken &amp;&amp;&#160;</td>
          <td class="paramname"><em>token</em> = <code>boost::asio::default_completion_token_t&lt;typename&#160;AsyncReadStream::executor_type&gt;{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a complete response to a Redis command asynchronously. </p>
<p >This function reads a complete response to a command or a server push asynchronously. For example</p>
<div class="fragment"><div class="line">std::string buffer;</div>
<div class="line">std::set&lt;std::string&gt; resp;</div>
<div class="line"><span class="keyword">co_await</span> <a class="code hl_function" href="group__low-level-api.html#ga8a0d6c76b5faeeaa5ee5e2e4770cd181">resp3::async_read</a>(socket, dynamic_buffer(buffer), <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>(resp));</div>
</div><!-- fragment --><p >For a complete example see examples/transaction.cpp. This function is implemented in terms of one or more calls to <code>asio::async_read_until</code> and <code>asio::async_read</code> functions, and is known as a <em>composed</em> <em>operation</em>. Furthermore, the implementation may read additional bytes from the stream that lie past the end of the message being read. These additional bytes are stored in the dynamic buffer, which must be preserved for subsequent reads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream from which to read e.g. a tcp socket. </td></tr>
    <tr><td class="paramname">buffer</td><td>Dynamic buffer (version 2). </td></tr>
    <tr><td class="paramname">adapter</td><td>The response adapter. </td></tr>
    <tr><td class="paramname">token</td><td>The completion token.</td></tr>
  </table>
  </dd>
</dl>
<p>The completion handler will receive as a parameter the total number of bytes transferred from the stream and must have the following signature</p>
<div class="fragment"><div class="line">void(boost::system::error_code, std::size_t);</div>
</div><!-- fragment --><dl class="section remark"><dt>Remarks</dt><dd>This function calls buf.consume() in each chunk of data after it has been passed to the adapter. Users must not consume the bytes after it returns. </dd></dl>

<p class="definition">Definition at line <a class="el" href="read_8hpp_source.html#l00169">169</a> of file <a class="el" href="read_8hpp_source.html">read.hpp</a>.</p>

</div>
</div>
<a id="ga54dda2974f233dd25a2eaf20ce9b5385" name="ga54dda2974f233dd25a2eaf20ce9b5385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54dda2974f233dd25a2eaf20ce9b5385">&#9670;&nbsp;</a></span>async_write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class AsyncWriteStream , class Request , class CompletionToken  = boost::asio::default_completion_token_t&lt;typename AsyncWriteStream::executor_type&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::resp3::async_write </td>
          <td>(</td>
          <td class="paramtype">AsyncWriteStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Request const &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CompletionToken &amp;&amp;&#160;</td>
          <td class="paramname"><em>token</em> = <code>boost::asio::default_completion_token_t&lt;typename&#160;AsyncWriteStream::executor_type&gt;{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a request asynchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>Stream to write the request to. </td></tr>
    <tr><td class="paramname">req</td><td>Request to write. </td></tr>
    <tr><td class="paramname">token</td><td>Asio completion token. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="write_8hpp_source.html#l00053">53</a> of file <a class="el" href="write_8hpp_source.html">write.hpp</a>.</p>

</div>
</div>
<a id="gad7df3a165405aef64f72618d45d100cb" name="gad7df3a165405aef64f72618d45d100cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7df3a165405aef64f72618d45d100cb">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SyncReadStream , class DynamicBuffer , class ResponseAdapter &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::resp3::read </td>
          <td>(</td>
          <td class="paramtype">SyncReadStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynamicBuffer&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ResponseAdapter&#160;</td>
          <td class="paramname"><em>adapter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::system::error_code &amp;&#160;</td>
          <td class="paramname"><em>ec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; std::size_t
</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a complete response to a command sychronously. </p>
<p >This function reads a complete response to a command or a server push synchronously. For example</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> resp;</div>
<div class="line">std::string buffer;</div>
<div class="line"><a class="code hl_function" href="group__low-level-api.html#gad7df3a165405aef64f72618d45d100cb">resp3::read</a>(socket, dynamic_buffer(buffer), <a class="code hl_function" href="group__high-level-api.html#gac56bb1a8df93445853a4b9dae2d97b6e">adapt</a>(resp));</div>
</div><!-- fragment --><p >For a complete example see examples/intro_sync.cpp. This function is implemented in terms of one or more calls to <code>asio::read_until</code> and <code>asio::read</code> functions, and is known as a <em>composed</em> <em>operation</em>. Furthermore, the implementation may read additional bytes from the stream that lie past the end of the message being read. These additional bytes are stored in the dynamic buffer, which must be preserved for subsequent reads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream from which to read e.g. a tcp socket. </td></tr>
    <tr><td class="paramname">buf</td><td>Dynamic buffer (version 2). </td></tr>
    <tr><td class="paramname">adapter</td><td>The response adapter. </td></tr>
    <tr><td class="paramname">ec</td><td>If an error occurs, it will be assigned to this paramter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes that have been consumed from the dynamic buffer.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function calls buf.consume() in each chunk of data after it has been passed to the adapter. Users must not consume the bytes after it returns. </dd></dl>

<p class="definition">Definition at line <a class="el" href="read_8hpp_source.html#l00056">56</a> of file <a class="el" href="read_8hpp_source.html">read.hpp</a>.</p>

</div>
</div>
<a id="gab94ca8205fe516f47e48e148a6216026" name="gab94ca8205fe516f47e48e148a6216026"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab94ca8205fe516f47e48e148a6216026">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SyncReadStream , class DynamicBuffer , class ResponseAdapter  = detail::ignore_response&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::resp3::read </td>
          <td>(</td>
          <td class="paramtype">SyncReadStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynamicBuffer&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ResponseAdapter&#160;</td>
          <td class="paramname"><em>adapter</em> = <code>ResponseAdapter{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a complete response to a command sychronously. </p>
<p >Same as the error_code overload but throws on error. </p>

<p class="definition">Definition at line <a class="el" href="read_8hpp_source.html#l00111">111</a> of file <a class="el" href="read_8hpp_source.html">read.hpp</a>.</p>

</div>
</div>
<a id="gacbd6128072528430cb2e95782410258c" name="gacbd6128072528430cb2e95782410258c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacbd6128072528430cb2e95782410258c">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SyncWriteStream , class Request &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto aedis::resp3::write </td>
          <td>(</td>
          <td class="paramtype">SyncWriteStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Request const &amp;&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a request synchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>Stream to write the request to. </td></tr>
    <tr><td class="paramname">req</td><td>Request to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="write_8hpp_source.html#l00024">24</a> of file <a class="el" href="write_8hpp_source.html">write.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jan 14 2023 18:40:26 for Aedis by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
